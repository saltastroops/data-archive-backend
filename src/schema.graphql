# import * from './generated/prisma.graphql'

"""
The schema's root query type.
"""
type Query {
  """
  The currently logged in user. An error is raised if the user is not logged in.
  """
  user: User
  dataRequestById(dataRequestId: String!): DataRequest
  dataRequestsForUser(userId: String!): [DataRequest!]!
}

"""
The schema's root mutation type.
"""
type Mutation {
  createDataRequest(files: [String!]!): DataRequest!
  # TODO UPDATE
  """
  Register a new data archive user.

  Neither the username nor the email address must be used by another user already.
  """
  signup(
    """
    Family name ("surname").
    """
    familyName: String!
    """
    Given name ("first name").
    """
    givenName: String!
    """
    Username, which must not contain upper case letters.
    """
    username: String!
    """
    Email address, which will be stored as lower case.
    """
    email: String!
    """
    Affiliation, such as a university or an institute.
    """
    affiliation: String!
    """
    Password.
    """
    password: String!
  ): User!
  updateDataRequest(dataRequestId: ID!, downloadLink: String): DataRequest
  updateDataRequestPart(
    dataRequestPartId: ID!
    downloadLink: String
    status: DataRequestStatus
    statusReason: String
  ): DataRequestPart
}

"""
A data archive user.
"""
type User {
  """
  User id.
  """
  id: ID!
  """
  Family name ("surname").
  """
  familyName: String!
  """
  Given name ("first name").
  """
  givenName: String!
  """
  Username, which must not contain upper case letters.
  """
  username: String!
  """
  Email address, which will be stored as lower case.
  """
  email: String!
  """
  Affiliation, such as a university or an institute.
  """
  affiliation: String!
  """
  User roles, which defines the user's permissions.
  """
  roles: [Role!]!
}
